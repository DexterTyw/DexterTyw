<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tyw_ei</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="题目名称 掷骰子 环岛旁边 铁路历险      源文件名 dice.pas/.c/.cpp roundabout.pas/.c/.cpp railway.pas/.c/.cpp    输入文件 dice.in roundabout.in railway.in    输出文件 dice.out roundabout.out railway.out    时间限制 每个测试点1s 每个测试点1s">
<meta property="og:type" content="article">
<meta property="og:title" content="Tyw_ei">
<meta property="og:url" content="https://dextertyw.github.io/2017/07/19/[noip模拟赛2017.7.3]/index.html">
<meta property="og:site_name" content="Tyw_ei">
<meta property="og:description" content="题目名称 掷骰子 环岛旁边 铁路历险      源文件名 dice.pas/.c/.cpp roundabout.pas/.c/.cpp railway.pas/.c/.cpp    输入文件 dice.in roundabout.in railway.in    输出文件 dice.out roundabout.out railway.out    时间限制 每个测试点1s 每个测试点1s">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://timgsa.baidu.com/timg?image&quality=80&size=b10000_10000&sec=1499485129085&di=f819cfefbee5fff9c4b2c5144a6fb0b2&imgtype=jpg&src=http%3A%2F%2Fe.hiphotos.baidu.com%2Fimage%2Fpic%2Fitem%2Fd8f9d72a6059252d987dd3af3e9b033b5bb5b937.jpg">
<meta property="og:updated_time" content="2017-07-08T02:56:28.668Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tyw_ei">
<meta name="twitter:description" content="题目名称 掷骰子 环岛旁边 铁路历险      源文件名 dice.pas/.c/.cpp roundabout.pas/.c/.cpp railway.pas/.c/.cpp    输入文件 dice.in roundabout.in railway.in    输出文件 dice.out roundabout.out railway.out    时间限制 每个测试点1s 每个测试点1s">
<meta name="twitter:image" content="https://timgsa.baidu.com/timg?image&quality=80&size=b10000_10000&sec=1499485129085&di=f819cfefbee5fff9c4b2c5144a6fb0b2&imgtype=jpg&src=http%3A%2F%2Fe.hiphotos.baidu.com%2Fimage%2Fpic%2Fitem%2Fd8f9d72a6059252d987dd3af3e9b033b5bb5b937.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Tyw_ei" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Tyw_ei</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">For Our Future</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dextertyw.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-[noip模拟赛2017.7.3]" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/19/[noip模拟赛2017.7.3]/" class="article-date">
  <time datetime="2017-07-19T00:22:15.720Z" itemprop="datePublished">2017-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <table>
<thead>
<tr>
<th>题目名称</th>
<th>掷骰子</th>
<th>环岛旁边</th>
<th>铁路历险 </th>
</tr>
</thead>
<tbody>
<tr>
<td>源文件名</td>
<td>dice.pas/.c/.cpp</td>
<td>roundabout.pas/.c/.cpp</td>
<td>railway.pas/.c/.cpp </td>
</tr>
<tr>
<td>输入文件</td>
<td>dice.in</td>
<td>roundabout.in</td>
<td>railway.in </td>
</tr>
<tr>
<td>输出文件</td>
<td>dice.out</td>
<td>roundabout.out</td>
<td>railway.out </td>
</tr>
<tr>
<td>时间限制</td>
<td>每个测试点1s</td>
<td>每个测试点1s</td>
<td>每个测试点2s </td>
</tr>
<tr>
<td>内存限制</td>
<td>128MB</td>
<td>128MB</td>
<td>128MB </td>
</tr>
<tr>
<td>测试点数目</td>
<td>10</td>
<td>10</td>
<td>10 </td>
</tr>
<tr>
<td>每个测试点分值</td>
<td>10</td>
<td>10</td>
<td>10 </td>
</tr>
<tr>
<td>题目类型</td>
<td>传统型</td>
<td>传统型</td>
<td>传统型 </td>
</tr>
<tr>
<td>是否有部分分</td>
<td>无</td>
<td>无</td>
<td>无 </td>
</tr>
<tr>
<td>是否有附加文件</td>
<td>无</td>
<td>无</td>
<td>无 </td>
</tr>
<tr>
<td>是否有Special Judge</td>
<td>无</td>
<td>无</td>
<td>无 </td>
</tr>
</tbody>
</table>
<p>评测环境：Windows7, Intel(R) Core(TM) i5-2430M CPU @ 2.40GHz</p>
<p>注意：最终评测时，所有编译命令均不打开任何优化开关！ </p>
<h1 id="掷骰子-dice-pas-c-cpp"><a href="#掷骰子-dice-pas-c-cpp" class="headerlink" title="掷骰子(dice.pas/.c/.cpp)"></a>掷骰子(dice.pas/.c/.cpp)</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>Rainbow和Freda通过一次偶然的机会来到了魔界。魔界的大门上赫然写着:<br>小盆友们，欢迎来到魔界！乃们需要解决这样一个问题才能进入哦lala~<br>有 N 枚骰子，其中第 i（1&lt;=i&lt;=N）枚骰子有 a[i]面。掷出第 i 枚骰子时，这 a[i]面中只<br>有一面朝上，而且这a[i]面每面朝上的概率都相等，为1/a[i].<br>门上还写道：这N个骰子，显然一共有M = ∑ 𝑎[𝑖] 𝑁 𝑖=1 个面。你们要做的就是把1~M这M<br>个数字不重不漏地写到这M个面上。同时掷出这N个骰子，你们的得分就是这N个骰子朝上<br>的面上的数字之和。你们要做的，就是使你们的得分的期望值最大哦~ </p>
<h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行一个整数N，表示骰子的数目。 </p>
<p>第二行N个整数，第i个整数a[i]表示第i个骰子有多少个面。 </p>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行一个实数Ans，表示Freda和Rainbow得分的最大期望值，保留三位小数。 </p>
<h2 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h2><p>2<br>1 4 </p>
<h2 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h2><p>7.500 </p>
<h2 id="样例解释"><a href="#样例解释" class="headerlink" title="样例解释"></a>样例解释</h2><p> 在第一个骰子的唯一一面写上 5,第二个骰子的四面分别写上 1,2,3,4。这样得分的期望就<br>是5/1+(1+2+3+4)/4=7.5了。 </p>
<h2 id="数据范围与约定"><a href="#数据范围与约定" class="headerlink" title="数据范围与约定"></a>数据范围与约定</h2><p>对于30%的数据，N&lt;=10 </p>
<p>对于50%的数据，N&lt;=1000. </p>
<p>对于100%的数据，0&lt;N&lt;=50000 ,0&lt;a[i]&lt;=100。</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>本来以为是概率DP的，仔细一看才发现是个贪心。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">using namespace std;</div><div class="line">int m,n,a[50005];</div><div class="line">double ans;</div><div class="line">int main()&#123;</div><div class="line">	freopen(&quot;dice.in&quot;,&quot;r&quot;,stdin);</div><div class="line">	freopen(&quot;dice.out&quot;,&quot;w&quot;,stdout);</div><div class="line">	scanf(&quot;%d&quot;,&amp;n);</div><div class="line">	for(int i=1;i&lt;=n;i++)</div><div class="line">		scanf(&quot;%d&quot;,&amp;a[i]),m+=a[i];</div><div class="line">	sort(a+1,a+1+n);</div><div class="line">	for(int i=1;i&lt;=n;i++)&#123;</div><div class="line">		for(int j=1;j&lt;=a[i];j++)&#123;</div><div class="line">			ans+=double(m)/double(a[i]);</div><div class="line">			m--;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	printf(&quot;%.3lf&quot;,ans);</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="环岛旁边-roundabout-pas-c-cpp"><a href="#环岛旁边-roundabout-pas-c-cpp" class="headerlink" title="环岛旁边 (roundabout.pas/.c/.cpp)"></a>环岛旁边 (roundabout.pas/.c/.cpp)</h1><h2 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h2><p>Rainbow 和 Freda 在掷骰子的时候 rp 爆发，居然掷出了满点&gt;&lt;（其实我就不说所有的<br>a[i]都是1），顺利到达了环岛旁。它们正观察着这个环岛的时候，环岛居然开口说话了T_T：<br>欢迎来到魔界环岛。我会告诉你们环岛的运行方式，并且邀请你们帮我解决一个问题。环<br>岛在东西南北四个方向分别有一个入口和出口，环岛内的车辆逆时针行驶。车辆可以进入、离<br>开或环岛或者在环岛内行进一步，这三种操作每次都是耗时1秒。在环岛内行进一步，即从东<br>走到北，从北走到西，从西走到南或者从南走到东（换句话说，行进两步就可以围绕环岛走半<br>圈了）。如果操作不互相干扰，所有车辆的操作可以同时进行。比如，环岛上有两辆车，一辆<br>在另一辆的后面，它们可以一起在环岛内行进一步。一辆车是否进入环岛取决于它们这一秒是<br>否可以进入，如果此时可以进入，它一定会进入，否则就将加入或者停留在该方向的等待序列<br>中。<br>什么时候一辆车可以进入环岛呢？这取决于它上一秒得到的信息。如果第 i-1 秒时，它所<br>在方向的顺时针紧邻方向的环岛上和等待序列里面都没有车，而且它是所在方向等待序列的第<br>一辆车，那么它在第i秒可以进入环岛。特别地，四个方向的等待序列里都有车的时候，北面<br>的车优先行驶——即只要第i-1秒时东面环岛上没有车，第i秒的时候，北面等待的第一辆车<br>就可以进入环岛了。<br>当然，每个车辆都有一个目标方向，一旦一辆车A到达了目标方向，它就会马上离开环岛<br>的。注意，如果此时它的目标方向有另一辆车B在等待进入环岛且B车此时可以进入环岛，A<br>车离开环岛和B车进入环岛是发生在同一秒的。<br>“我将给你们每秒车辆到达环岛旁的信息，请你们帮我计算，最后一辆车离开环岛的时间<br>好吗？” </p>
<h2 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h2><p>四行，每行一个字符串。<br>第一行一个字符串N，只含有‘-’，‘S’,‘W’,‘E’四种字符，字符串的第i个字符N[i]<br>表示第i-1秒的时候，有一辆来自北方向、目标方向为N[i]的车等待进入环岛，如果N[i]=’-＇，<br>表示第i-1秒没有车来自北方向。<br>第二行一个字符串E，只含有 ‘-’，‘ S’,‘W’,‘N’四种字符，含义同上。<br>第三行一个字符串S，只含有 ‘-’，‘ N’,‘W’,‘E’四种字符，含义同上。<br>第四行一个字符串W，只含有 ‘-’，‘ S’,‘N’,‘E’四种字符，含义同上。<br>对于字符串中的字符，N表示北方向，E表示东方向，W表示西方向，S表示南方向。 </p>
<h2 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行一个整数totalTime，表示最后一辆车离开环岛的时间。 </p>
<h2 id="样例输入1"><a href="#样例输入1" class="headerlink" title="样例输入1"></a>样例输入1</h2><p>– </p>
<p>– </p>
<p>WE </p>
<p>-S </p>
<h2 id="样例输出1"><a href="#样例输出1" class="headerlink" title="样例输出1"></a>样例输出1</h2><p>6 </p>
<h2 id="样例输入2"><a href="#样例输入2" class="headerlink" title="样例输入2"></a>样例输入2</h2><p>ES </p>
<p>N </p>
<p>E </p>
<p>– </p>
<h2 id="样例输出2"><a href="#样例输出2" class="headerlink" title="样例输出2"></a>样例输出2</h2><p>9 </p>
<h2 id="样例解释-1"><a href="#样例解释-1" class="headerlink" title="样例解释"></a>样例解释</h2><p>样例1如图所示： </p>
<p>数据范围与约定  对于50%的数据，每个字符串长度&lt;=10.<br> 对于100%的数据，0&lt;每个字符串长度&lt;=100. </p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>模拟，模拟，还是模拟…………………….</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">using namespace std;</div><div class="line">char s[5][105];int T;</div><div class="line">int come[5][105],Car;</div><div class="line">int w[5][105],h[5],t[5];</div><div class="line">int trs(char ch)&#123;</div><div class="line">	if(ch==&apos;N&apos;)return 1;</div><div class="line">	if(ch==&apos;E&apos;)return 4;</div><div class="line">	if(ch==&apos;S&apos;)return 3;</div><div class="line">	if(ch==&apos;W&apos;)return 2;</div><div class="line">	return 0;</div><div class="line">&#125;</div><div class="line">char rtrs(int num)&#123;</div><div class="line">	if(num==1)return &apos;N&apos;;</div><div class="line">	if(num==2)return &apos;W&apos;;</div><div class="line">	if(num==3)return &apos;S&apos;;</div><div class="line">	if(num==4)return &apos;E&apos;;</div><div class="line">	return &apos; &apos;;</div><div class="line">&#125;</div><div class="line">void read()&#123;</div><div class="line">	scanf(&quot;%s%s%s%s&quot;,s[1],s[4],s[3],s[2]);</div><div class="line">	for(int i=1;i&lt;=4;i++)&#123;</div><div class="line">		int len=strlen(s[i]);</div><div class="line">		for(int j=0;j&lt;len;j++)&#123;</div><div class="line">			come[i][j]=trs(s[i][j]);</div><div class="line">			if(come[i][j])Car++;</div><div class="line">		&#125;		</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">void wait_in()&#123;</div><div class="line">	for(int i=1;i&lt;=4;i++)</div><div class="line">		if(come[i][T])</div><div class="line">			w[i][t[i]++]=come[i][T];</div><div class="line">&#125;</div><div class="line">int road[5];</div><div class="line">void run()&#123;</div><div class="line">	int tmp[5];</div><div class="line">	for(int i=1;i&lt;=4;i++)&#123;</div><div class="line">		if(road[i]==i)road[i]=0,Car--;</div><div class="line">	&#125;</div><div class="line">	for(int i=1;i&lt;=4;i++)tmp[i]=road[i];</div><div class="line">	for(int i=1;i&lt;=4;i++)&#123;</div><div class="line">		int last=i-1;if(last==0)last=4;</div><div class="line">		road[i]=tmp[last];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">int flag[5];</div><div class="line">void check()&#123;</div><div class="line">	if(h[1]&lt;t[1]&amp;&amp;h[2]&lt;t[2]&amp;&amp;h[3]&lt;t[3]&amp;&amp;h[4]&lt;t[4])&#123;</div><div class="line">		flag[1]=false;flag[2]=false;</div><div class="line">		flag[3]=false;flag[4]=false; </div><div class="line">		if(road[4]==0)flag[1]=true;</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line">	for(int i=1;i&lt;=4;i++)&#123;</div><div class="line">		int last=i-1;if(last==0)last=4;</div><div class="line">		if(h[i]&gt;=t[i])&#123;</div><div class="line">			flag[i]=false;</div><div class="line">			continue;</div><div class="line">		&#125;</div><div class="line">		if(h[last]&lt;t[last]||road[last])flag[i]=false;</div><div class="line">		else flag[i]=true;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">void wait_out()&#123;</div><div class="line">	for(int i=1;i&lt;=4;i++)if(flag[i])</div><div class="line">		road[i]=w[i][h[i]++];</div><div class="line">&#125;</div><div class="line">void Debug()&#123;</div><div class="line">	cout&lt;&lt;T&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot;    &quot;&lt;&lt;&apos;|&apos;&lt;&lt;rtrs(w[1][h[1]])&lt;&lt;&apos;|&apos;&lt;&lt;&quot;    &quot;&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot;    &quot;&lt;&lt;&quot;/&quot;&lt;&lt;&quot; \\&quot;&lt;&lt;&quot;    &quot;&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot;   &quot;&lt;&lt;&quot;/ &quot; &lt;&lt;rtrs(road[1])  &lt;&lt;&quot; \\&quot;&lt;&lt;&quot;   &quot;&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot; --&quot;&lt;&lt;&quot; /-\\ &quot;              &lt;&lt;&quot;-- &quot;&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot; &quot;&lt;&lt;rtrs(w[2][h[2]])&lt;&lt;&quot; &quot;&lt;&lt;rtrs(road[2])&lt;&lt;&quot;| |&quot;&lt;&lt;rtrs(road[4])&lt;&lt;&quot; &quot;&lt;&lt;rtrs(w[4][h[4]])&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot; --&quot;&lt;&lt;&quot; \\-/ &quot;              &lt;&lt;&quot;-- &quot;&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot;   &quot;&lt;&lt;&quot;\\ &quot; &lt;&lt;rtrs(road[3])  &lt;&lt;&quot; /&quot;&lt;&lt;&quot;   &quot;&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot;    &quot;&lt;&lt;&quot;\\&quot;&lt;&lt;&quot; /&quot;&lt;&lt;&quot;    &quot;&lt;&lt;endl;</div><div class="line">	cout&lt;&lt;&quot;    &quot;&lt;&lt;&apos;|&apos;&lt;&lt;rtrs(w[3][h[3]])&lt;&lt;&apos;|&apos;&lt;&lt;&quot;    &quot;&lt;&lt;endl;</div><div class="line">&#125;</div><div class="line">void work()&#123;</div><div class="line">	while(Car)&#123;</div><div class="line">		wait_in();</div><div class="line">		//Debug();</div><div class="line">		check();</div><div class="line">		run();</div><div class="line">		wait_out();</div><div class="line">		T++;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">void print()&#123;</div><div class="line">	printf(&quot;%d&quot;,T);</div><div class="line">&#125;</div><div class="line">int main()&#123;</div><div class="line">	freopen(&quot;roundabout.in&quot;,&quot;r&quot;,stdin);</div><div class="line">	freopen(&quot;roundabout.out&quot;,&quot;w&quot;,stdout);</div><div class="line">	read();</div><div class="line">	work();</div><div class="line">	print();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="铁路历险"><a href="#铁路历险" class="headerlink" title="铁路历险"></a>铁路历险</h1><p> (railway.pas/.c/.cpp) </p>
<h2 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h2><p>经过一番努力，Freda 和 Rainbow 来到了魔力铁路的 1 号站台。它们知道，魔力铁路不<br>同于普通的铁路，下面有一段关于魔力铁路的介绍。<br>魔力铁路一共有N座站台，从第i(1&lt;i&lt;=N)号站台出发可以到达第i-1号站台。同时，对<br>于每个i(1&lt;=i&lt;=N)，你需要规定x[i]为1~N当中的任意一个数字，表示从第i号站台出发可<br>以到达的另外一个站台，当然，你也可以把x[i]规定为i或者i-1。<br>Rainbow 和 Freda 想知道，有多少种不同的规定 x[i]的方案，使得它们能够到达 N 号站<br>台呢？方案A、B不同的条件是：存在一个i（1&lt;=i&lt;=N）使得方案A中的x[i]与方案B中的<br>x[i]不同。Freda 最讨厌乱七八糟的上万位数字了，所以，记得把答案 mod 1000000007<br>（10^9+7）哦lala~ </p>
<h2 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h2><p>一行一个整数N，表示站台的总数。 </p>
<h2 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行一个整数Ans，表示Freda和Rainbow能够到达N号站台的方案数。 </p>
<h2 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h2><p>3 </p>
<h2 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h2><p>12<br>样例解释<br>12种可能的方案如下(每行代表一种方案)：<br>x[1] | x[2] | x[3]<br>—|—|—<br>2 | 3 | 1<br>2 | 3 | 2<br>2 | 3 | 3<br>3 | 1 | 1<br>3 | 1 | 2<br>3 | 1 | 3<br>3 | 2 | 1<br>3 | 2 | 2<br>3 | 2 | 3<br>3 | 3 | 1<br>3 | 3 | 2<br>3 | 3 | 3 </p>
<h2 id="数据范围与约定-1"><a href="#数据范围与约定-1" class="headerlink" title="数据范围与约定"></a>数据范围与约定</h2><p>对于30%的数据，N&lt;=5. </p>
<p>对于50%的数据，N&lt;=10. </p>
<p>对于70%的数据，N&lt;=100. </p>
<p>对于100%的数据，0&lt;N&lt;=5000. </p>
<h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2><p>设只能到达i的答案为f[i],不难发现以下规律:</p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b10000_10000&amp;sec=1499485129085&amp;di=f819cfefbee5fff9c4b2c5144a6fb0b2&amp;imgtype=jpg&amp;src=http%3A%2F%2Fe.hiphotos.baidu.com%2Fimage%2Fpic%2Fitem%2Fd8f9d72a6059252d987dd3af3e9b033b5bb5b937.jpg" alt="image"></p>
<p>大意就是把前i个车站连通总方案减去只能到达前i-1个车站的方案，得到的就是f[i]，即只能到达第i个车站的方案数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#define LL int</div><div class="line">#define mod 1000000007</div><div class="line">using namespace std;</div><div class="line">LL n;</div><div class="line">LL ans[5005];</div><div class="line">LL ksm[5005][5005];</div><div class="line"></div><div class="line">int main()&#123;</div><div class="line">	freopen(&quot;railway.in&quot;,&quot;r&quot;,stdin);</div><div class="line">	freopen(&quot;railway.out&quot;,&quot;w&quot;,stdout);</div><div class="line">	scanf(&quot;%d&quot;,&amp;n);</div><div class="line">	ans[1]=1;</div><div class="line">	for(int i=1;i&lt;=n;i++)&#123;</div><div class="line">		ksm[i][0]=1;</div><div class="line">		for(int j=1;j&lt;=n;j++)&#123;</div><div class="line">			ksm[i][j]=((long long)ksm[i][j-1]*i)%mod;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	for(LL i=2;i&lt;=n;i++)&#123;</div><div class="line">		ans[i]=ksm[i][i];</div><div class="line">		for(LL j=1;j&lt;=i-1;j++)</div><div class="line">			ans[i]=(ans[i]+mod-((long long)ksm[i][i-j]*ans[j])%mod)%mod;</div><div class="line">	&#125;</div><div class="line">	printf(&quot;%d&quot;,ans[n]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dextertyw.github.io/2017/07/19/[noip模拟赛2017.7.3]/" data-id="cj5a9kajw000198r07qmuudwm" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2017/07/19/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/19/[noip模拟赛2017.7.3]/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/07/19/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 by Dexter Yue<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>